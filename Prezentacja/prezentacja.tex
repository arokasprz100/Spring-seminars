\documentclass{beamer}
\usepackage[polish]{babel}
\usepackage[utf8]{inputenc}
\usepackage{lmodern}
\usepackage{listings}

\usetheme{AGH}

\title{Spring i Spring Boot}
\subtitle{}
\author{Sylwia Oleś \and Arkadiusz Kasprzak}
\institute{}
\website{}
\date{\today}

\definecolor{lgray}{gray}{0.96}
\definecolor{lbcolor}{rgb}{0.9,0.9,0.9}
\lstset{
    framesep=2pt,
    breaklines=true,
    breakatwhitespace=true,
    basicstyle=\footnotesize,
    aboveskip={0.75\baselineskip},
    columns=flexible,
    showstringspaces=false,
    breaklines=true,
    prebreak = \raisebox{0ex}[0ex][0ex]{\ensuremath{\hookleftarrow}},
    frame=single,
    rulecolor=\color{lgray},
    showtabs=false,
    showspaces=false,
    showstringspaces=false,
    backgroundcolor=\color{lgray},
    identifierstyle=\ttfamily,
    keywordstyle=\color[rgb]{0,0,1},
    commentstyle=\color[rgb]{0.0,0.26,0.15},
    stringstyle=\color[rgb]{0.627,0.126,0.941}
}


\begin{document}

\titleframe[pl]

\begin{frame}{Plan prezentacji}
\tableofcontents
\end{frame}

\begin{frame}{Materiały}
Link: \url{https://github.com/arokasprz100/Spring-seminars} \\
Repozytorium zawiera:
\begin{itemize}
\item prezentację
\item przykłady
\item zadanie domowe wraz z instrukcją
\end{itemize}
\end{frame}

\section{Wprowadzenie do Spring Boot}

\begin{frame}
\frametitle{Po co używać Spring Boot?}
\begin{itemize}
\item Używanie frameworka Spring często niesie za sobą konieczność długiej i powtarzalnej konfiguracji używanych w projekcie zależności.
\item Konieczne jest tworzenie sporej liczby plików \textit{.xml} i/lub klas, często na zasadzie kopiowania gotowych rozwiązań.
\item Takie podejście daje z jednej strony dużą elastyczność, ale jeśli chcemy po prostu zrobić coś w sposób standardowych to dodaje nam sporo pracy.
\item Spring Boot jest odpowiedzią na ten problem.
\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Co to właściwie jest Spring Boot?}
\begin{itemize}
\item Zbiór predefiniowanych konfiguracji pozwalających w prosty sposób korzystać z domyślnych rozwiązań - może to być np. dodanie do aplikacji obsługi jakiejś bazy danych.
\item Bardzo prosta zasada działania: na etapie \textbf{startowania aplikacji} Spring Boot skanuje \textit{classpath} (lokalizacja, w której znajdują się pliki \textit{.class} i pakiety) i na podstawie jego zawartości \textbf{konfiguruje te komponenty}, które są nam potrzebne.
\item W dalszej części prezentacji pokazane zostaną niektóre szczegóły działania tego mechanizmu.
\end{itemize}
\end{frame}


\begin{frame}
\frametitle{Co to właściwie jest Spring Boot?}
Ponadto Spring Boot:
\begin{itemize}
\item dostarcza narzędzi do monitorowania stanu aplikacji.
\item dostarcza narzędzia wzbogacające możliwość pisania testów.
\item dostarcza wbudowany serwer Tomcat (i możliwość zamiany na Jetty czy Undertow).
\end{itemize}
Spring Boot nie jest więc jedynie narzędziem do szybkiego generowania projektów.
\end{frame}

\begin{frame}
\frametitle{Spring vs. Spring Boot}
Przykład 1: Porównanie aplikacji napisanej w Spring z aplikacja w Spring Boot
\begin{itemize}
\item prosta aplikacja pozwalająca na tworzenie i wyświetlanie rekordów w bazie danych
\item wykorzystuje silnik Thymeleaf w warstwie prezentacji
\item wykorzystuje bazę danych H2
\item aplikacja napisana bez Spring Boot zawiera dużą ilość dodatkowego kodu - konfiguracja
\end{itemize}
\end{frame}

\section{Działanie Spring Boot}


\begin{frame}
\frametitle{Działanie Spring Boot}
\begin{itemize}
\item Przykład 2: Minimalna aplikacja w Spring Boot
\item Dwa główne elementy:
\begin{itemize}
    \item adnotacja @SpringBootApplication
    \item klasa SpringApplication
\end{itemize}
\item Klasa SpringApplication odpowiada m.in. za uruchomienie aplikacji i stworzenie instancji ApplicationContext.
\item W dalszej części skupimy się na adnotacji @SpringBootApplication.
\end{itemize}
\end{frame}


\begin{frame}
\frametitle{Adnotacja @SpringBootApplication}
\begin{itemize}
\item Umieszczona zwykle na poziomie głównej klasy w aplikacji 
\item Równoważna trzem innym adnotacjom:
\begin{itemize}
    \item @Configuration
    \item @EnableAutoConfiguration
    \item @ComponentScan
\end{itemize}
\item Możemy to zobaczyć dzięki opcji \lstinline{Open Declaration} w Eclipse.
\item Te adnotacje są częścią frameworka Spring
\item Aby nie wchodzić zbytnio w szczegóły działania samego Springa skupimy się na drugiej i trzeciej.
\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Adnotacja @ComponentScan}
\begin{itemize}
\item odpowiada za skanowanie w celu poszukiwania w projekcie komponentów (\textit{Spring Bean})
\item użycie jej bez atrybutów oznacza: znajdź komponenty w tym pakiecie oraz wszystkich pod-pakietach
\item komponenty znalezione w ten sposób mogą być następnie m.in. wstrzykiwane za pomocą adnotacji @Autowired
\item daje dużo możliwości, m.in. pozwala zdefiniować, które komponenty powinny zostać pominięte - my skupimy się na przypadku bazowym
\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Adnotacja @EnableAutoConfiguration}
\begin{itemize}
\item Wprowadza do działania system automatycznej konfiguracji
\item Celem jest dokonanie przez framework automatycznej konfiguracji aplikacji na podstawie zawartości \textit{classpath}
\item Mechanizm jest nieinwazyjny - automatyczna konfiguracja jest wdrażana tylko wtedy, gdy spełnione są odpowiednie warunki: dodaliśmy odpowiednie zależności i nie nadpisaliśmy konfiguracji sami
\item Takie podejście sprawia, że chcąc zrobić coś niestandardowo nie musimy ,,walczyć'' z frameworkiem.
\item Przykład 3: Adnotacje @ComponentScan i @EnableAutoConfiguration
\end{itemize}
\end{frame}


\begin{frame}[fragile]
\frametitle{Spring Boot Starters}
\begin{itemize}
\item Zbiór wygodnych deskryptorów zależności
\item Przykład dla Maven:
\begin{lstlisting}
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-web</artifactId>
</dependency>
\end{lstlisting}
\item Każda wersja Spring Boot wspiera konkretne wersje zależności tak, by nie pojawiały się żadne konflikty.
\end{itemize}
\end{frame}


\section{Spring Boot Actuator}

\begin{frame}
\frametitle{Spring Boot Actuator}
\begin{itemize}
\item Narzędzie pozwalające monitorować i zarządzać aplikacją m.in. za pomocą specjalnego zestawu \textit{endpointów} HTTP.
\item Możemy monitorować np.: stan aplikacji (ang. \textit{health}), listę komponentów wchodzących w skład aplikacji czy listę \textit{endpointów} aplikacji.
\item W pliku \lstinline{application.properties} możemy łatwo konfigurować dostępność tych \textit{endpointów} - nie wszystkie dostępne są domyślnie (od wersji 2.0 większość nie jest).
\item Endpoint bazowy: \lstinline{/actuator}
\item Rozbudowane narzędzie, tutaj zaprezentowane tylko podstawy.
\item Przykład 4: użycie Spring Boot Actuator na prostej aplikacji.
\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Spring Boot Actuator}
Niektóre \textit{endpointy}:
\begin{itemize}
\item \lstinline{health} - podsumowanie stanu naszej aplikacji
\item \lstinline{shutdown} - wyłączenie aplikacji
\item \lstinline{info} - ogólne informacje
\item \lstinline{beans} - lista komponentów Spring-owych
\item \lstinline{logfile} - logi aplikacji
\item \lstinline{metrics} - szczegółowe metryki aplikacji
\item \lstinline{mappings} - mapowania ścieżek (\lstinline{@RequestMapping})
\item \lstinline{httptrace} - ostatnie zapytania HTTP (konfiguracja)
\end{itemize}
Istnieje możliwość tworzenia własnych \textit{endpointów} jak również rozszerzania funkcjonalności tych domyślnych.
\end{frame}

\section{Struktura projektu i dobre praktyki}

\begin{frame}
\frametitle{Struktura projektu i dobre praktyki}
\begin{itemize}
\item Używanie automatycznej konfiguracji i starterów, gdy tylko jest to możliwe - dzięki temu mamy pewność, że nie będziemy mieli problemów np. z niedopasowanymi wersjami zależności
\item Unikanie umieszczanie klas w domyślnym pakiecie (sytuacja, gdy nie podamy nazwy pakietu w pliku) - pozwala to uniknąć problemów z @ComponentScan
\item Klasa z metodą main powinna się znaleźć na górze hierarchii pakietów (ang. \textit{top-level}).
\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Struktura projektu i dobre praktyki}
\begin{itemize}
\item Odpowiedni podział projektu:
\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Źródła}
\begin{itemize}
\item Craig Walls - \textit{Spring Boot in Action}
\item Craig Walls - \textit{Spring in Action}
\item Iuliana Cosmina, Rob Harrop, Chris Schaefer, Clarence Ho - \textit{Pro Spring 5: An In-Depth Guide to the Spring Framework and Its Tools, Fifth Edition}
\item Jakub Kubryński - prezentacja \textit{Spring Boot} (\href{https://www.youtube.com/watch?v=zQll41ha5_g&feature=emb_title}{link})
\item Oficjalna dokumentacja (\href{https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html}{link})
\item Strona \textit{mkyong.com} (\href{https://mkyong.com/spring-boot/}{link})
\item Strona \textit{baeldung.com} (\href{https://www.baeldung.com/}{link})
\end{itemize}
\end{frame}

\end{document}
